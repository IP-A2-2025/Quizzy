***************Beginning Page***************
***************page number:1**************
Arhilectun calcullloarelor 5i sineme a: 0pm“ - pan“ a ll-a
IV.5.3. Memoria virtualﬁ

***************Ending Page***************

***************Beginning Page***************
***************page number:2**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
Ideea de pornire
Problema
' aplicagiile - consum mare de memorie
' memoria disponibili - insuﬁciente'l
Cum se poate rezolva?
' capacitatea discului hard - foarte mare
' nu toate zonele dc memorie ocupate sunt
accesate la un moment dat
—m.

***************Ending Page***************

***************Beginning Page***************
***************page number:3**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
Memoria virtualé
Soluyia — memoria virtualé (swap)
' unele zone de memorie - evacuate pe disc
' cénd este nevoie de ele, sunt aduse inapoi in
memone
Cine gestioneazﬁ memoria virtualé?
- sunt necesare informatii globale
- sistemul de operate
—m

***************Ending Page***************

***************Beginning Page***************
***************page number:4**************
Arhilectun calcullloarelor 5i sineme a: 0pm“ - pan“ a ll-a
F1$1erul de paglnare

- conﬁne zonele dc memorie evacuate pe disc
- inforrnaﬁi pentru regésirea unei zone stocate

i adresele din memorie

— programul céruia ii apartine

i dimensiunea

i BIC.
—m

***************Ending Page***************

***************Beginning Page***************
***************page number:5**************
Arhilectlln calcullloarelar 5i 5mm do 0pm“ - pan" a ll-a
Polltlca de 1nlocu1re (1)
- problema - accca$i ca 1a memoria cache
- aducerea unei zone dc memorie din ﬁsierul
de paginare implici evacuarea alteia
i care?
- scop - minimizarea acccselor la disc
- politicé ineﬁcienté a numﬁr mare dc access
la disc —> scéderea vitezei
—103

***************Ending Page***************

***************Beginning Page***************
***************page number:6**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
Politica de inlocuire (2)

' set dc lucru (working set) - zonclc de
memoric necesare programului la un
moment dat

' uzual mult mai mic decﬁt totalitatca zonelor
folositc dc program

' dacé incape in memoric — pugine access la
disc

—104

***************Ending Page***************


***************Beginning Page***************
***************page number:7**************
Arhilectlln calcullloarelar 5i 5mm do 0pm“ - pan" a ll-a
Polltlca de 1nlocu1re (3)
' se va selecta pentru evacuare zona care nu
va ﬁ necesaré Tn viitorul apropiat
' nu se poate $ti cu certitudine - estimare
— pe baza comportérii in trecutul apropiat
' paginare 1a cerere (demand paging) -
evacuare pe disc numai dacé este strict
necesar
—m§

***************Ending Page***************

***************Beginning Page***************
***************page number:8**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
Implementare
' prin intermediul mecanismelor de gestiune a
memoriei, deja discutate
i daci un program incearci sé acceseze 0 locayie
aﬂatz'i temporar pe disc, este necesar acela$i tip
de detecgie
i memoria virtualé poale ﬁ folosilé impreuni alét
cu segmentarea, cét 5i cu paginarea
~ rolul sistemului de intreruperi - sporit
166

***************Ending Page***************

***************Beginning Page***************
***************page number:9**************
Arhilectlln calcullloarelar 5i 5mm do 0pm“ - pan" a ll-a
Accesul la memorie (1)
Cazul paginérii

1. programul precizeazé adresa vinuali

2. se determiné pagina din care face parte

3‘ se cauté pagina in tabelul de paginare

4. daci pagina este gésité - salt 1a pasul 9

5. generate exceptie

6. rutina de tratare cauté pagina in f1$ierul de

paginare
—m

***************Ending Page***************

***************Beginning Page***************
***************page number:10**************
Arhilectlln calcullloarelar 5i 5mm do 0pm“ - pan" a ll-a
Accesul la memorie (2)
Cazul paginérii (cont)
7‘ dacé pagina nu este in ﬁ$ierul de paginare -
programul este terminat
8. se aduce pagina in memoria ﬁzicé
94 se determiné cadrul de paginé
corespunzitor
10. calcul adresé ﬁzicé
11. acces la adresa calculati
168

***************Ending Page***************

***************Beginning Page***************
***************page number:11**************
Arhilectlln calcullloarelar 5i 5mm do 0pm“ - pan" a ll-a

Reducerea acceselor la disc (1)

- duce la cre$terea performantei

- o paginé este salvaté pe disc $i readusé in
memorie de mai multe ori

' readucerea in memorie - copia de pe disc nu
este stearsﬁ

- pagina 5i copia sa dc pe disc sunt identice
péni la modiﬁcarea paginii din memorie

—m

***************Ending Page***************


***************Beginning Page***************
***************page number:12**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
Reducerea acceselor la disc (2)
' evacuarea unei pagini din memorie
— dacé nu a fost modiﬁcaté de cénd se aﬂé in
memorie - nu mai trebuie salvaté
i util mai ales pentru paginile de cod
' este necesar sprij in hardware pentru
dctectarea acestci situatii
i este suﬁciem s5 ﬁe detectate operatiile de
scnere
—m

***************Ending Page***************

***************Beginning Page***************
***************page number:13**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
Reducerea acceselor la dlsc (3)
~ tabelul dc paginare — structuré extinsé
i ﬁecare pagini are un bit suplimentar (dirty bit)
i indicé dacé pagina a fost modiﬁcaté de cind a
fost adusé in memorie
i resetat la aducerea paginii in memorie
' instrucgiune de scriere in memorie
i procesorul seteazé bitul paginii care conﬁne
locatia modiﬁcaté
—|7\

***************Ending Page***************

***************Beginning Page***************
***************page number:14**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
IV.5.4. Comunicarea intre
p rocese

***************Ending Page***************

***************Beginning Page***************
***************page number:15**************
Arhilectlln calcullloarelor 5i sineme a: upmn - pm" a ll-a
Comunicare (1)
- pentru a putea coopera, procesele trebuie s5-
$i poaté transmite date
— uneori volume mari
' implementare ﬁzicé - zone de memorie
comune
i variabile partajate
— structuri de dale mai complexe, prevézute cu
metode speciﬁce de acces
I73

***************Ending Page***************

***************Beginning Page***************
***************page number:16**************
Arhilectlln calcullloarelar 5i 5mm do 0pm“ - pan" a ll-a
Comunlcare (2)
' este necesar ca doué sau mai multe procese
s51 acceseze aceeasi zoné de memorie
i acelasi segment sé apare'l simultan in tabelele de
descriptori ale mai multor procese
i acelasi cadru de paginé s71 aparé simultan in
tabclclc dc paginarc alc mai multor proccsc
' in oricare caz, sistemul de operare
controleazé zonele comune
i iaI procesele sum constiente de caracterul
partajat a1 acestora
—m

***************Ending Page***************


***************Beginning Page***************
***************page number:17**************
Arhilectlln calcullloarelor 5i sineme a: upmn - pm" a ll-a
Excludere mutualé (1)
~ accesul la 0 resursé comuné poate dura
i gi poate consta in mai multe operatii
' apare pericolul interferentelor
' exemplu
i un proces incepe accesul la o variabilé comuné
i inainte de a termina, alt proces Tncepe s5 o
acceseze
i variabila poate ﬁ modiﬁcaté in mod incorect
I75

***************Ending Page***************

***************Beginning Page***************
***************page number:18**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
Excludere mutuala (2)
' accesul 1a 0 resursi comuné - doar in
anumite conditii
' excludere mutualé
i 1a un moment dat, un singur proces poate
accesa 0 anumiti resursé
- mecanisrne de control
i semafor - cel mai simplu
— structuri partaj ate ale céror metode de acces
asigurz'l excluderea mutualz'l (ex. monitor)
I76

***************Ending Page***************

***************Beginning Page***************
***************page number:19**************
Arhilectlln calcullloarelar 5i 5mm do 0pm“ - pan" a ll-a
Implementare

' accesul 1a 0 resursi poate f1 controlat (gi
blocat) doar dc citre sistemul de operare

- deci orice formé dc accesare a unei resurse
panajate implicé un apel sistem

' dacé se lucreazé 1a nivel jos (variabile
partajate + semafoare), este sarcina
programatorului s51 se asigure 051 apelul este
realizat corect

—m

***************Ending Page***************

***************Beginning Page***************
***************page number:20**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
Fire de execugie - comunicare

' in cazul ﬁrelor de execugie ale aceluiagi

proces, variabilele globale sunt automat

partajate

i vitezﬁ mai mare

i crc$tc riscul crorilor dc programarc
' necesitatea excluderii mutuale este prezenti

§i aici
—m

***************Ending Page***************

***************Beginning Page***************
***************page number:21**************
Arhilectun calcullloarelor 5i sineme a: 0pm“ - pan“ a ll-a
IV.5.5. Utilizarea MMU

***************Ending Page***************


***************Beginning Page***************
***************page number:22**************
Arhilectllra calcullloarelor 5i sixteme a: open“ - pan“ a ll-a
Hardware

Cazul Intel
~ segmentarea

i nu poate ﬁ dezactivaté

i dar poate ﬁ "evitalé" prin software
- paginarea

i poate ﬁ activaté/dezactivati
—\xn

***************Ending Page***************

***************Beginning Page***************
***************page number:23**************
Arhilectlln calcullloarelor 5i sineme a: upmn - pm" a ll-a
Sistemul de operate
Cazurile Windows, Linux
' segmentarea
— nu este utilizaté in practicé
— toate segmentele sunt dimensionate asfel incét
s51 acopere singure intreaga memorie
~ paginarea
i pagini dc 4 KB
i Windows poate folosi 5i pagini de 4 MB
m

***************Ending Page***************

***************Beginning Page***************
***************page number:24**************
Arhilectlln calcullloarelor 5i sineme a: upmn - pm" a ll-a
Utilitatea MMU (1)
Avantaje
~ protectic la crori
~ 0 aplicatie nu poatc pcrturba functionarea
alteia
' veriﬁcérile se fac in hardware
i mecanism sigur
i vitezé mai mare
—m

***************Ending Page***************

***************Beginning Page***************
***************page number:25**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
Utilitatea MMU (2)
Dezavantaje
~ gestiune complicaté
' memorie ocupati cu structurile de date
proprn
i tabelul de descriptori
i tabelul de paginare
- vitezé rcdusé - dubleazé numérul acccselor
la memorie (sau mai mult)
183

***************Ending Page***************

***************Beginning Page***************
***************page number:26**************
Arhilectlln calcullloarelnr 5i sineme do upmn - pan" a ll-a
Utilitatea MMU (3)

Concluzii
~ scéderea dc performanté poate ﬁ

compensaté folosind cache-uri
' procesoarele de azi oferi suﬁcienté vitezé
' sisteme multitasking - risc mare de

interferente
' mecanismele MMU trebuie folosite
—nu

***************Ending Page***************

